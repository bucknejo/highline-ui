<div id="highline-account">

    <div class="row">
        <div class="col-md-2">
            <div ui-view="left"></div>
        </div>
        <div class="col-md-8">
            <highline-quick-actions action="account"></highline-quick-actions>
            <div class="row">
                <div class="col-md-12">
                    <div class="segment-header-bold">Account</div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="segment-header">Details</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">

                            <form name="hlFormUser" highline-form-helper event-name="{{eventName}}">

                                <div class="form-group"
                                     ng-class="{'has-error': hlFormUser.firstName.$touched && hlFormUser.firstName.$invalid}">
                                    <label class="" for="firstName">First Name</label>
                                    <input type="text" id="firstName" name="firstName" placeholder="First Name" class="form-control"
                                           ng-model="user.first_name" required>
                                    <div ng-messages="hlFormUser.firstName.$error" class="help-block">
                                        <div ng-message="required">You must enter a first name.</div>
                                    </div>
                                </div>

                                <div class="form-group"
                                     ng-class="{'has-error': hlFormUser.lastName.$touched && hlFormUser.lastName.$invalid}">
                                    <label class="" for="lastName">Last Name</label>
                                    <input type="text" id="lastName" name="lastName" placeholder="Last Name" class="form-control"
                                           ng-model="user.last_name" required>
                                    <div ng-messages="hlFormUser.lastName.$error" class="help-block">
                                        <div ng-message="required">You must enter a last name.</div>
                                    </div>
                                </div>

                                <div class="form-group" ng-class="{'has-error': hlFormUser.email.$touched && hlFormUser.email.$invalid}">
                                    <label class="" for="email">Email</label>
                                    <input type="email" id="email" name="email" placeholder="Email" class="form-control"
                                           ng-model="user.email" required>
                                    <div ng-messages="hlFormUser.email.$error" class="help-block">
                                        <div ng-message="required">You must enter an email address.</div>
                                        <div ng-message="email">Your email address is invalid.</div>
                                    </div>
                                </div>

                                <div class="form-group" ng-class="{'has-error': hlFormUser.skill.$touched && hlFormUser.skill.$invalid}">
                                    <label class="" for="skill">Skill</label>
                                    <select id="skill" name="skill" placeholder="Skill" class="form-control" ng-model="user.skill"
                                            ng-options="skill.value as skill.text for skill in skills" required>
                                        <option value="" disabled selected>[Please Choose]</option>
                                    </select>
                                    <div ng-messages="hlFormUser.skill.$error" class="help-block">
                                        <div ng-message="required">Please enter your current skill level.</div>
                                    </div>
                                </div>

                                <div class="form-group"
                                     ng-class="{'has-error': hlFormUser.experience.$touched && hlFormUser.experience.$invalid}">
                                    <label class="" for="experience">Experience</label>
                                    <input type="number" id="experience" name="experience" placeholder="Experience" class="form-control"
                                           ng-model="user.experience" min="0" max="99" required>
                                    <div ng-messages="hlFormUser.experience.$error" class="help-block">
                                        <div ng-message="required">Please provide your years of experience.</div>
                                        <div ng-message="number">Years of experience must be an integer.</div>
                                        <div ng-message="min">Your years of experience must be at least 0.</div>
                                        <div ng-message="max">Yoda you are not. Please enter a value less than or equal to 99.</div>
                                    </div>
                                </div>

                                <div class="form-group" ng-class="{'has-error': hlFormUser.style.$touched && hlFormUser.style.$invalid}">
                                    <label class="" for="style">Style</label>
                                    <select id="style" name="style" placeholder="Style" class="form-control" ng-model="user.style"
                                            ng-options="style.value as style.text for style in styles" required>
                                        <option value="" disabled selected>[Please Choose]</option>
                                    </select>
                                    <div ng-messages="hlFormUser.style.$error" class="help-block">
                                        <div ng-message="required">Please provide your current riding style.</div>
                                    </div>
                                </div>

                                <div class="form-group"
                                     ng-class="{'has-error': hlFormUser.viewable.$touched && hlFormUser.viewable.$invalid}">
                                    <label class="" for="viewable">Viewable</label>
                                    <select id="viewable" name="viewable" placeholder="Public" class="form-control" ng-model="user.viewable"
                                            ng-options="viewable.value as viewable.text for viewable in viewables" required>
                                        <option value="" disabled selected>[Please Choose]</option>
                                    </select>
                                    <div ng-messages="hlFormUser.viewable.$error" class="help-block">
                                        <div ng-message="required">Please select if you like your user profile to be public or private.
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group" ng-class="{'has-error': hlFormUser.gender.$touched && hlFormUser.gender.$invalid}">
                                    <label class="" for="gender">Gender</label>
                                    <select id="gender" name="gender" placeholder="Gender" class="form-control" ng-model="user.gender"
                                            ng-options="gender.value as gender.text for gender in genders" required>
                                        <option value="" disabled selected>[Please Choose]</option>
                                    </select>
                                    <div ng-messages="hlFormUser.gender.$error" class="help-block">
                                        <div ng-message="required">Please select if your gender.</div>
                                    </div>
                                </div>

                            </form>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 text-center">
                            <div class="center-block">

                                <!--
                                <button type="button" class="btn btn-primary" ng-click="addUser()" ng-disabled="addable(hlFormUser.$invalid)">Add</button>
                                <button type="button" class="btn btn-primary" ng-click="deleteUser(hlFormUser)" ng-disabled="deletable()">Delete</button>
                                <button type="button" class="btn btn-primary" ng-click="clear(hlFormUser)">Clear</button>
                                -->
                                <button type="button" class="btn btn-primary" ng-click="updateUser()" ng-disabled="updatable(hlFormUser.$invalid)">Update</button>
                                <button type="button" class="btn btn-primary" ng-click="resetUser(hlFormUser)" ng-disabled="deletable()">Reset</button>
                                <button type="button" class="btn btn-primary" ng-click="openModal(settings)">Open Modal</button>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">

                    <div class="row">
                        <div class="col-md-12">
                            <div class="segment-header">Addresses
                                <span class="pull-right">
                                    <i class="fa fa-plus edit" aria-hidden="true" ng-click="editAddress()"></i>
                                </span>
                            </div>

                            <table class="table table-striped table-hover equipment-table">
                                <thead>
                                <tr>
                                    <td>Rank</td>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Street</td>
                                    <td>City</td>
                                    <td>Zip</td>
                                    <td>&nbsp;</td>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="address in user.addresses">
                                    <td>{{address.rank}}</td>
                                    <td>{{address.name}}</td>
                                    <td>{{address.type}}</td>
                                    <td>{{address.street}}</td>
                                    <td>{{address.city}}</td>
                                    <td>{{address.zip}}</td>
                                    <td>
                                        <i class="fa fa-pencil" aria-hidden="true" class="account-address-edit" style="cursor: hand; cursor: pointer; color: #465a9b;" ng-click="editAddress(address.id)"></i>
                                    </td>
                                </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="segment-header">Equipment
                                <span class="pull-right">
                                    <i class="fa fa-plus edit" aria-hidden="true" ng-click="editEquipment()"></i>
                                </span>
                            </div>
                            <table class="table table-striped table-hover equipment-table">
                                <thead>
                                <tr>
                                    <td>Type</td>
                                    <td>Name</td>
                                    <td>Make</td>
                                    <td>Model</td>
                                    <td>Year</td>
                                    <td>&nbsp;</td>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="item in user.equipment">
                                    <td>{{item.type}}</td>
                                    <td>{{item.name}}</td>
                                    <td>{{item.make}}</td>
                                    <td>{{item.model}}</td>
                                    <td>{{item.year}}</td>
                                    <td>
                                        <i class="fa fa-pencil edit" aria-hidden="true" ng-click="editEquipment(item.id)"></i>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="segment-header">Avatar
                                <span class="pull-right">
                                    <highline-upload id="upload-avatar" max-files-allowed="1" listener="USER" upload-icon="edit" class="edit"></highline-upload>
                                </span>
                            </div>
                            <div style="margin-bottom: 10px;">
                                <img ng-src="{{user.avatar}}" alt="Highline Avatar" class="img-thumbnail avatar-medium"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="segment-header">Preferences</div>

                            <uib-tabset>
                                <uib-tab index="0" heading="Access">
                                    <div>
                                        <table class="table table-striped table-hover table-preferences">
                                            <thead>
                                            <tr>
                                                <td>&nbsp;</td>
                                                <td class="text-center">&nbsp;</td>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td>
                                                    <label for="preferences-access-profile" class="preferences-label">My Profile:</label>
                                                </td>
                                                <td class="text-center">
                                                    <div class="btn-group" id="preferences-access-profile">
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].access_profile" uib-btn-checkbox btn-checkbox-true="1">Public</label>
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].access_profile" uib-btn-checkbox btn-checkbox-true="0">Private</label>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <label for="preferences-access-groups" class="preferences-label">My Groups:</label>
                                                </td>
                                                <td class="text-center">
                                                    <div class="btn-group" id="preferences-access-groups">
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].access_groups" uib-btn-checkbox btn-checkbox-true="1">Public</label>
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].access_groups" uib-btn-checkbox btn-checkbox-true="0">Private</label>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <label for="preferences-access-friends" class="preferences-label">My Friends:</label>
                                                </td>
                                                <td class="text-center">
                                                    <div class="btn-group" id="preferences-access-friends">
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].access_friends" uib-btn-checkbox btn-checkbox-true="1">Public</label>
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].access_friends" uib-btn-checkbox btn-checkbox-true="0">Private</label>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <label for="preferences-access-rides" class="preferences-label">My Rides:</label>
                                                </td>
                                                <td class="text-center">
                                                    <div class="btn-group" id="preferences-access-rides">
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].access_rides" uib-btn-checkbox btn-checkbox-true="1">Public</label>
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].access_rides" uib-btn-checkbox btn-checkbox-true="0">Private</label>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <label for="preferences-access-photos" class="preferences-label">My Photos:</label>
                                                </td>
                                                <td class="text-center">
                                                    <div class="btn-group" id="preferences-access-photos">
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].access_photos" uib-btn-checkbox btn-checkbox-true="1">Public</label>
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].access_photos" uib-btn-checkbox btn-checkbox-true="0">Private</label>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </uib-tab>
                                <uib-tab index="1" heading="Notifications">
                                    <div>

                                        <table class="table table-striped table-hover table-preferences">
                                            <thead>
                                                <tr>
                                                    <td>&nbsp;</td>
                                                    <td class="text-center">&nbsp;</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <label for="preferences-notificiations-email-activity" class="preferences-label">Email Activity:</label>
                                                    </td>
                                                    <td class="text-center">
                                                        <div class="btn-group" id="preferences-notificiations-email-activity">
                                                            <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].notify_email_activity" uib-btn-checkbox btn-checkbox-true="1">On</label>
                                                            <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].notify_email_activity" uib-btn-checkbox btn-checkbox-true="0">Off</label>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label for="preferences-notificiations-email-alerts" class="preferences-label">Email Alerts:</label>
                                                    </td>
                                                    <td class="text-center">
                                                        <div class="btn-group" id="preferences-notificiations-email-alerts">
                                                            <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].notify_email_alerts" uib-btn-checkbox btn-checkbox-true="1">On</label>
                                                            <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].notify_email_alerts" uib-btn-checkbox btn-checkbox-true="0">Off</label>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label for="preferences-notificiations-sms-activity" class="preferences-label">SMS Activity:</label>
                                                    </td>
                                                    <td class="text-center">
                                                        <div class="btn-group" id="preferences-notificiations-sms-activity">
                                                            <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].notify_sms_activity" uib-btn-checkbox btn-checkbox-true="1">On</label>
                                                            <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].notify_sms_activity" uib-btn-checkbox btn-checkbox-true="0">Off</label>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label for="preferences-notificiations-sms-alerts" class="preferences-label">Email Alerts:</label>
                                                    </td>
                                                    <td class="text-center">
                                                        <div class="btn-group" id="preferences-notificiations-sms-alerts">
                                                            <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].notify_sms_alerts" uib-btn-checkbox btn-checkbox-true="1">On</label>
                                                            <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].notify_sms_alerts" uib-btn-checkbox btn-checkbox-true="0">Off</label>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>

                                    </div>
                                </uib-tab>
                                <uib-tab index="2" heading="Addresses">
                                    <div>

                                        <table class="table table-striped table-hover table-preferences">
                                            <thead>
                                            <tr>
                                                <td>&nbsp;</td>
                                                <td class="text-center">&nbsp;</td>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td>
                                                    <label for="preferences-address-show-all" class="preferences-label">Show All:</label>
                                                </td>
                                                <td class="text-center">
                                                    <div class="btn-group" id="preferences-address-show-all">
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].address_show_all" uib-btn-checkbox btn-checkbox-true="1">On</label>
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].address_show_all" uib-btn-checkbox btn-checkbox-true="0">Off</label>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <label for="preferences-address-show-street" class="preferences-label">Show Street:</label>
                                                </td>
                                                <td class="text-center">
                                                    <div class="btn-group" id="preferences-address-show-street">
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].address_show_street" uib-btn-checkbox btn-checkbox-true="1">On</label>
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].address_show_street" uib-btn-checkbox btn-checkbox-true="0">Off</label>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <label for="preferences-address-show-city" class="preferences-label">Show City:</label>
                                                </td>
                                                <td class="text-center">
                                                    <div class="btn-group" id="preferences-address-show-city">
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].address_show_city" uib-btn-checkbox btn-checkbox-true="1">On</label>
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].address_show_city" uib-btn-checkbox btn-checkbox-true="0">Off</label>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <label for="preferences-address-show-state" class="preferences-label">Show State:</label>
                                                </td>
                                                <td class="text-center">
                                                    <div class="btn-group" id="preferences-address-show-state">
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].address_show_state" uib-btn-checkbox btn-checkbox-true="1">On</label>
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].address_show_state" uib-btn-checkbox btn-checkbox-true="0">Off</label>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <label for="preferences-address-show-zip" class="preferences-label">Show ZIP:</label>
                                                </td>
                                                <td class="text-center">
                                                    <div class="btn-group" id="preferences-address-show-zip">
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].address_show_zip" uib-btn-checkbox btn-checkbox-true="1">On</label>
                                                        <label class="btn btn-primary btn-xs" ng-model="user.preferences[0].address_show_zip" uib-btn-checkbox btn-checkbox-true="0">Off</label>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>

                                    </div>
                                </uib-tab>
                            </uib-tabset>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div ui-view="right"></div>
        </div>
    </div>

    <hr/>

    <pre ng-show="debug">{{user | json}}</pre>

</div>

